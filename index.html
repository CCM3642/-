<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ملخص مبيعات الأصناف</title>
<!-- ربط مكتبة Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- استخدام Tailwind CSS للتصميم السريع -->
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">

<h1 class="text-2xl font-bold mb-4 text-center">ملخص مبيعات الأصناف</h1>

<!-- زر لتحميل البيانات -->
<div class="text-center mb-4">
  <button id="loadDataBtn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
    عرض البيانات
  </button>
</div>

<!-- جدول البيانات -->
<div class="overflow-x-auto mb-8">
  <table class="min-w-full bg-white border border-gray-300">
    <thead>
      <tr>
        <th class="border border-gray-300 px-4 py-2">الصنف</th>
        <th class="border border-gray-300 px-4 py-2">مبيعات إجمالية</th>
        <th class="border border-gray-300 px-4 py-2">نسبة المبيعات</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
</div>

<!-- مخطط بياني -->
<div class="max-w-3xl mx-auto">
  <canvas id="salesChart"></canvas>
</div>

<script>
// البيانات التي أرسلتها، يمكن استبدالها أو تحميلها من API
const dataItems = [
  { Item: "Daily Spicy Meal", "Gross Sales": 703150.74, "% Sales": 15.69 },
  { Item: "DAILY OFFER Spicy Meal", "Gross Sales": 494302.47, "% Sales": 10.24 },
  { Item: "Daily Original Meal", "Gross Sales": 401143.47, "% Sales": 8.94 },
  { Item: "DAILY OFFER Original Meal", "Gross Sales": 383665.20, "% Sales": 8.03 },
  { Item: "CHICKEN DAY SPICY", "Gross Sales": 102203.25, "% Sales": 2.34 },
  { Item: "DAILY OFFER MIX Meal", "Gross Sales": 93834.33, "% Sales": 2.14 },
  { Item: "SAVING MEAL Original", "Gross Sales": 93754.72, "% Sales": 1.97 },
  { Item: "ULTIMATE Spicy", "Gross Sales": 78938.91, "% Sales": 1.81 },
  { Item: "DAILY OFFER Original Mea", "Gross Sales": 79730.89, "% Sales": 1.65 },
  { Item: "SAVING MEAL Spicy", "Gross Sales": 75051.87, "% Sales": 1.57 }
  // يمكنك إضافة المزيد من البيانات هنا
];

const loadDataBtn = document.getElementById('loadDataBtn');
const tableBody = document.getElementById('tableBody');

let salesChart;

loadDataBtn.addEventListener('click', () => {
  // تحديث الجدول
  tableBody.innerHTML = "";
  dataItems.forEach(item => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td class="border border-gray-300 px-4 py-2">${item.Item}</td>
      <td class="border border-gray-300 px-4 py-2">${item["Gross Sales"].toLocaleString()}</td>
      <td class="border border-gray-300 px-4 py-2">${item["% Sales"].toFixed(2)}%</td>
    `;
    tableBody.appendChild(row);
  });

  // إعداد البيانات للمخطط
  const labels = dataItems.map(item => item.Item);
  const salesData = dataItems.map(item => item["Gross Sales"]);

  // تدمير المخطط السابق إذا موجود
  if (salesChart) {
    salesChart.destroy();
  }

  // إنشاء المخطط
  const ctx = document.getElementById('salesChart').getContext('2d');
  salesChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'مبيعات الأصناف',
        data: salesData,
        backgroundColor: 'rgba(59, 130, 246, 0.7)', // أزرق شفاف
        borderColor: 'rgba(59, 130, 246, 1)',
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false },
        tooltip: { mode: 'index', intersect: false }
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            callback: function(value) {
              return value.toLocaleString();
            }
          }
        }
      }
    }
  });
});
</script>

</body>
</html>
